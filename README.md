# Messenger Project

This project demonstrates a small messenger built with **Nest.js**, **GraphQL** and **RabbitMQ**. Messages are stored in a **PostgreSQL** database and authentication relies on **JWT** tokens. A lightweight React front-end lives in the `frontend/` directory and is served statically by the API.
This project demonstrates a small messenger built with **Nest.js**, **GraphQL** and **RabbitMQ**. Messages are stored in a **PostgreSQL** database and authentication relies on **JWT** tokens. A lightweight React front-end is included in the `frontend/` directory.


## Features

- User signup and avatars
- List of users *(in progress)*
- Group conversations with room selection
- Sending messages through RabbitMQ

- PostgreSQL message persistence
- JWT authentication with a `login` mutation
- Simple React client with multiple pages, dark/light theme and login form
- Basic group conversations and unread notifications




- Minimal React client



## Stack

- Node.js + Nest.js
- GraphQL API
- RabbitMQ for message queue
- Microservice worker listening to RabbitMQ
- Docker for local development

## Setup

1. Clone the repository

```bash
git clone <repo>
7. Open the app at `http://localhost:3000` (the API serves the React files).
```

A small GitHub Actions workflow installs dependencies and runs this command on each push.

2. Install dependencies *(requires internet access)*

```bash
npm install --prefix backend
npm install --prefix worker
```

3. Copy environment variables

```bash
cp .env.example .env
```

4. Start RabbitMQ

```bash
docker-compose up -d
```

5. Run the API

```bash
npm run start:dev --prefix backend
```

6. Run the worker

```bash
npm run start:dev --prefix worker
```
The worker and the API both read the RabbitMQ URL from the `RABBITMQ_URL` environment variable (see `.env.example`).

7. Open the front-end at `http://localhost:3000/index.html`.

8. Use the login form to obtain a JWT before sending messages.





The GraphQL playground is available at `http://localhost:3000/graphql`.

## Testing


Unit tests are located in `backend/test/` and `worker/test/` and can be executed with:








```bash
npm test
```

### Example GraphQL queries

```graphql
mutation {
  sendMessage(content: "Hello world") {
    id
    content
  }
}
```

```graphql
query {
  messages {
    id
    content
  }
}
```

Authentication uses JWT tokens generated by the `login` mutation. Configure the secret with `JWT_SECRET` in the `.env` file. The front-end logs in and stores the token in `localStorage` for subsequent requests.



The front-end sends this token in the `Authorization` header when communicating with the GraphQL API.

This skeleton can be extended with real databases, authentication strategies or real-time subscriptions.

